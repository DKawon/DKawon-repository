<!DOCTYPE html>
<html lang="pl">
<head>
    <!-- Definicja kodowania i responsywno≈õci -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Naukowy</title>
    <link rel="stylesheet" href="kalk_style.css">
    <!-- Biblioteka math.js do oblicze≈Ñ matematycznych -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/10.6.4/math.min.js"></script>
</head>
<body>
    <!-- G≈Ç√≥wny kontener aplikacji -->
    <div class="container">
        <!-- Kalkulator z mo≈ºliwo≈õciƒÖ przeciƒÖgania -->
        <div class="calculator draggable" id="calculator">
            <div class="drag-handle">‚ò∞ PrzeciƒÖgnij</div>
            <!-- Wyb√≥r motywu kolorystycznego -->
            <select id="themeSelect" onchange="setTheme(this.value)">
                <option value="light">Motyw Jasny</option>
                <option value="dark">Motyw Ciemny</option>
                <option value="ocean">Motyw Oceaniczny</option>
                <option value="sunny">Motyw S≈Çoneczny</option>
                <option value="space">Motyw Kosmiczny</option>
                <option value="forest">Motyw Le≈õny</option>
            </select>
            <!-- Wy≈õwietlacz wyniku -->
            <input type="text" id="display" readonly>
            
            <!-- Tryb kalkulatora -->
            <div id="calcMode">
                <div class="buttons">
                    <button onclick="appendValue('1')" title="Cyfra 1">1</button>
                    <button onclick="appendValue('2')" title="Cyfra 2">2</button>
                    <button onclick="appendValue('3')" title="Cyfra 3">3</button>
                    <button onclick="appendValue('4')" title="Cyfra 4">4</button>
                    <button onclick="appendValue('5')" title="Cyfra 5">5</button>
                    <button onclick="appendValue('6')" title="Cyfra 6">6</button>
                    <button onclick="appendValue('7')" title="Cyfra 7">7</button>
                    <button onclick="appendValue('8')" title="Cyfra 8">8</button>
                    <button onclick="appendValue('9')" title="Cyfra 9">9</button>
                    <button onclick="appendValue('0')" title="Cyfra 0">0</button>
                    <button onclick="appendValue('.')" title="Kropka dziesiƒôtna">.</button>
                    <button onclick="appendValue('(')" title="Otw√≥rz nawias">(</button>
                    <button onclick="appendValue(')')" title="Zamknij nawias">)</button>
                    <button onclick="appendValue('+')" title="Dodawanie">+</button>
                    <button onclick="appendValue('-')" title="Odejmowanie">-</button>
                    <button onclick="appendValue('*')" title="Mno≈ºenie">*</button>
                    <button onclick="appendValue('/')" title="Dzielenie">/</button>
                    <button onclick="appendValue('^')" title="Potƒôgowanie">^</button>
                    <button onclick="appendValue('sqrt(')" title="Pierwiastek kwadratowy">‚àö</button>
                    <button onclick="appendValue('sin(')" title="Sinus">sin</button>
                    <button onclick="appendValue('cos(')" title="Cosinus">cos</button>
                    <button onclick="appendValue('tan(')" title="Tangens">tg</button>
                    <button onclick="appendValue('ln(')" title="Logarytm naturalny">ln</button>
                    <button onclick="appendValue('log(')" title="Logarytm dziesiƒôtny">log</button>
                    <button onclick="appendValue('pi')" title="Liczba Pi">œÄ</button>
                    <button onclick="appendValue('e')" title="Liczba e">e</button>
                    <button onclick="appendValue('!')" title="Silnia">!</button>
                    <button onclick="appendValue('%')" title="Procent">%</button>
                    <button onclick="calculateResult()" title="Oblicz wynik">=</button>
                    <button onclick="clearDisplay()" title="Wyczy≈õƒá ekran">C</button>
                    <button onclick="deleteLastChar()" title="Usu≈Ñ ostatni znak">‚Üê</button>
                </div>
            </div>

            <!-- Tryb konwersji jednostek -->
            <div id="unitMode" style="display: none;">
                <div class="unit-selection">
                    <select id="conversionType" onchange="updateUnitOptions()">
                        <option value="length">D≈Çugo≈õƒá</option>
                        <option value="mass">Masa</option>
                        <option value="temperature">Temperatura</option>
                        <option value="volume">Objƒôto≈õƒá</option>
                    </select>
                    <div class="unit-inputs" title="Wprowad≈∫ warto≈õƒá do konwersji">
                        <input type="number" id="unitInput" placeholder="Warto≈õƒá">
                        <select id="unitFrom"></select>
                        <span>‚Üí</span>
                        <select id="unitTo"></select>
                    </div>
                    <button onclick="convertUnits()" title="Wykonaj konwersjƒô">Konwertuj</button>
                </div>
            </div>

            <!-- Historia oblicze≈Ñ -->
            <div id="history" class="history"></div>

            <!-- Modal z instrukcjƒÖ -->
            <div id="instructionsModal" class="modal" style="display: none;">
                <div class="modal-content">
                    <span class="close" onclick="document.getElementById('instructionsModal').style.display='none'">√ó</span>
                    <h2>Instrukcja obs≈Çugi kalkulatora</h2>
                    <p><strong>Tryb kalkulatora:</strong></p>
                    <ul>
                        <li>U≈ºywaj przycisk√≥w cyfr (0-9) i kropki (.) do wprowadzania liczb.</li>
                        <li>Operatory (+, -, *, /, ^) s≈Çu≈ºƒÖ do dodawania, odejmowania, mno≈ºenia, dzielenia i potƒôgowania.</li>
                        <li>Funkcje (sin, cos, tg, ln, log, ‚àö) wykonujƒÖ operacje matematyczne; wpisz je przed liczbƒÖ, np. sin(30).</li>
                        <li>Sta≈Çe (œÄ, e) wstawiajƒÖ warto≈õci matematyczne.</li>
                        <li>Silnia (!) i procent (%) dzia≈ÇajƒÖ na wprowadzone liczby.</li>
                        <li>Przycisk "=" oblicza wynik, "C" czy≈õci ekran, "‚Üê" usuwa ostatni znak.</li>
                        <li>Mo≈ºesz u≈ºywaƒá klawiatury: cyfry, operatory, Enter (oblicz), Backspace (usu≈Ñ), Esc (wyczy≈õƒá).</li>
                    </ul>
                    <p><strong>Tryb konwersji jednostek:</strong></p>
                    <ul>
                        <li>Wybierz typ konwersji (d≈Çugo≈õƒá, masa, temperatura, objƒôto≈õƒá).</li>
                        <li>Wpisz warto≈õƒá i wybierz jednostki ≈∫r√≥d≈ÇowƒÖ oraz docelowƒÖ.</li>
                        <li>Kliknij "Konwertuj", aby zobaczyƒá wynik.</li>
                    </ul>
                    <p><strong>Motywy:</strong> Wybierz motyw kolorystyczny z listy rozwijanej lub z panelu bocznego.</p>
                    <p><strong>Notatki:</strong> Zapisz wa≈ºne obliczenia lub uwagi w sekcji notatek w panelu bocznym.</p>
                    <p><strong>PrzeciƒÖganie:</strong> Chwyƒá za pasek "PrzeciƒÖgnij" u g√≥ry kalkulatora lub panelu bocznego, aby przesunƒÖƒá je po ekranie.</p>
                    <p><strong>Podpowiedzi:</strong> Najed≈∫ kursorem na przyciski, aby zobaczyƒá ich opis.</p>
                </div>
            </div>

            <!-- Modal z notatkami -->
            <div id="notesModal" class="modal" style="display: none;">
                <div class="modal-content">
                    <span class="close" onclick="document.getElementById('notesModal').style.display='none'">√ó</span>
                    <h2>Notatki</h2>
                    <textarea id="noteInput" placeholder="Wpisz notatkƒô..." rows="4" style="width: 100%;"></textarea>
                    <button onclick="saveNote()" style="margin-top: 10px;">Zapisz</button>
                    <div id="notesList" style="margin-top: 15px; max-height: 200px; overflow-y: auto;"></div>
                </div>
            </div>
        </div>

        <!-- Panel boczny z przyciskami -->
        <div class="sidebar draggable" id="sidebar">
            <div class="drag-handle">‚ò∞ PrzeciƒÖgnij</div>
            <button class="sidebar-button" onclick="showInstructions()" title="Poka≈º instrukcjƒô obs≈Çugi"><span>‚ÑπÔ∏è</span> Instrukcja</button>
            <button class="sidebar-button" onclick="document.getElementById('themeSelect').focus()" title="Wybierz motyw kolorystyczny"><span>üé®</span> Motywy</button>
            <button class="sidebar-button" id="toggleHistoryButton" onclick="toggleHistory()" title="Poka≈º/ukryj historiƒô oblicze≈Ñ"><span>üìú</span> Historia</button>
            <button class="sidebar-button" id="toggleModeButton" onclick="toggleMode()" title="Prze≈ÇƒÖcz na konwerter jednostek"><span>üîÑ</span> Konwerter</button>
            <button class="sidebar-button" onclick="showNotesModal()" title="Zapisz lub przeglƒÖdaj notatki"><span>üìù</span> Notatki</button>
        </div>
    </div>
    <script src="kalk_script.js"></script>
</body>
</html>
